<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Assignments</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<h1>Assignments</h1>
<table class="table">
    <thead>
    <tr>
        <th>Name</th>
        <th>Brand</th>
        <th>Assigned Date</th>
        <th>Return Date</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="assignment : ${assignments}">
        <td th:text="${assignment.name}"></td>
        <td th:text="${assignment.brand}"></td>
        <td th:text="${#dates.format(assignment.assignedDate, 'dd/MM/yyyy')}"></td>
        <td th:text="${#dates.format(assignment.returnDate, 'dd/MM/yyyy')}"></td>
        <td>
            <button class="btn btn-warning update-assignment" th:attr="data-assignment-id=${assignment.id}">Update</button>
            <button class="btn btn-danger delete-assignment" th:attr="data-assignment-id=${assignment.id}">Delete</button>
        </td>
    </tr>
    </tbody>
</table>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script th:inline="javascript">
    $(document).ready(function() {
        $('.update-assignment').click(function() {
            var assignmentId = $(this).data('assignment-id');
            // Implement your update logic here
        });

        $('.delete-assignment').click(function() {
            var assignmentId = $(this).data('assignment-id');
            Swal.fire({
                title: 'Delete Assignment',
                text: 'Are you sure you want to delete this assignment?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Delete',
                cancelButtonText: 'Cancel',
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                reverseButtons: true,
                preConfirm: function() {
                    $.ajax({
                        url: '/assignments/delete/' + assignmentId,
                        method: 'DELETE',
                        success: function(response) {
                            // Reload the page or update the assignment list as needed
                        },
                        error: function(xhr, status, error) {
                            // Handle error
                        }
                    });
                }
            });
        });
    });
</script>
</body>
</html>
